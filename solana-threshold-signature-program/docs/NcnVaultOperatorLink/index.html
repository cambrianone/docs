
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://cambrian.one/solana-threshold-signature-program/docs/NcnVaultOperatorLink/" rel="canonical"/>
<link href="../../scheme/" rel="prev"/>
<link href="../PoaExecutionWithJitoRestaking/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.9" name="generator"/>
<title>Jito Restaking and Vault Program Documentation - cambrian docs</title>
<link href="../../../assets/stylesheets/main.4af4bdda.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/mkdocs_pagetree_plugin.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#jito-restaking-and-vault-program-documentation">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="cambrian docs" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="cambrian docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            cambrian docs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Jito Restaking and Vault Program Documentation
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="cambrian docs" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="cambrian docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    cambrian docs
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Cambrian docs
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Camb mvp
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Camb mvp
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../camb-mvp/">
<span class="md-ellipsis">
    Running
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    Docs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Docs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../camb-mvp/docs/cli-flow/">
<span class="md-ellipsis">
    Cambrian Utility
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Solana threshold signature program
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Solana threshold signature program
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    solana-threshold-signature-program
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../scheme/">
<span class="md-ellipsis">
    Scheme
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Docs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Docs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Jito Restaking and Vault Program Documentation
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Jito Restaking and Vault Program Documentation
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-vault-program-and-restaking-program-interaction">
<span class="md-ellipsis">
      1. Vault Program and Restaking Program Interaction
    </span>
</a>
<nav aria-label="1. Vault Program and Restaking Program Interaction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explanation">
<span class="md-ellipsis">
      Explanation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ncn-and-operator-mutual-opt-in-process">
<span class="md-ellipsis">
      2. NCN and Operator Mutual Opt-in Process
    </span>
</a>
<nav aria-label="2. NCN and Operator Mutual Opt-in Process" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explanation_1">
<span class="md-ellipsis">
      Explanation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-vault-delegation-to-operators">
<span class="md-ellipsis">
      3. Vault Delegation to Operators
    </span>
</a>
<nav aria-label="3. Vault Delegation to Operators" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explanation_2">
<span class="md-ellipsis">
      Explanation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PoaExecutionWithJitoRestaking/">
<span class="md-ellipsis">
    Proof-of-Authority (PoA) Program Documentation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-vault-program-and-restaking-program-interaction">
<span class="md-ellipsis">
      1. Vault Program and Restaking Program Interaction
    </span>
</a>
<nav aria-label="1. Vault Program and Restaking Program Interaction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explanation">
<span class="md-ellipsis">
      Explanation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ncn-and-operator-mutual-opt-in-process">
<span class="md-ellipsis">
      2. NCN and Operator Mutual Opt-in Process
    </span>
</a>
<nav aria-label="2. NCN and Operator Mutual Opt-in Process" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explanation_1">
<span class="md-ellipsis">
      Explanation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-vault-delegation-to-operators">
<span class="md-ellipsis">
      3. Vault Delegation to Operators
    </span>
</a>
<nav aria-label="3. Vault Delegation to Operators" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explanation_2">
<span class="md-ellipsis">
      Explanation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="jito-restaking-and-vault-program-documentation">Jito Restaking and Vault Program Documentation</h1>
<h2 id="overview">Overview</h2>
<p>The <strong>Jito Restaking and Vault Programs</strong> manage the relationships between vaults, NCNs (Node Consensus Networks), and operators. The Vault Program is responsible for handling deposits, tokenized stake, and delegation, while the Restaking Program facilitates the interactions between NCNs, operators, and vaults.</p>
<p>This documentation provides an in-depth look at the components and interactions between these entities, as represented by the following diagrams.</p>
<h2 id="1-vault-program-and-restaking-program-interaction">1. Vault Program and Restaking Program Interaction</h2>
<div class="mermaid">flowchart LR

    classDef main fill:#AAA,stroke:#333,stroke-width:2px;
    classDef ticket fill:#595,stroke:#333,stroke-width:1px,font-size:10;

    subgraph Vault Program
        Vault(Vault):::main
        VaultNcnTicket([VaultNcnTicket]):::ticket
    end

    subgraph Restaking Program
        NCN(NCN):::main
        NcnVaultTicket([NcnVaultTicket]):::ticket
    end

    %% Vault Program Links
    Vault --&gt;|Creates| VaultNcnTicket
    VaultNcnTicket --&gt;|Activated through warmup| NCN
    VaultNcnTicket -.-&gt;|Deactivated through cooldown| NCN

    %% Restaking Program Links
    NCN --&gt;|Creates| NcnVaultTicket
    NcnVaultTicket ---&gt; |Links| Vault
</div>
<h3 id="explanation">Explanation</h3>
<ul>
<li>The <strong>Vault Program</strong> creates <code>VaultNcnTicket</code> to signify its support for an NCN.</li>
<li>The <strong>VaultNcnTicket</strong> undergoes a warmup process to activate and a cooldown process to deactivate.</li>
<li>The <strong>Restaking Program</strong> creates <code>NcnVaultTicket</code> to formalize the link between an NCN and a vault.</li>
</ul>
<h2 id="2-ncn-and-operator-mutual-opt-in-process">2. NCN and Operator Mutual Opt-in Process</h2>
<div class="mermaid">flowchart LR

    classDef main fill:#AAA,stroke:#333,stroke-width:2px;
    classDef ticket fill:#595,stroke:#333,stroke-width:1px,font-size:10;

    subgraph Restaking Program
        NCN[NCN]:::main
        Operator[Operator]:::main
        NcnOperatorState[NcnOperatorState]:::ticket
    end

    NCN --&gt;|Registers| NcnOperatorState
    Operator --&gt;|Opts in| NcnOperatorState

    NcnOperatorState --&gt;|Mutual opt-in| Operator
</div>
<h3 id="explanation_1">Explanation</h3>
<ul>
<li>The <strong>NCN</strong> registers an <code>NcnOperatorState</code> account to track opt-ins.</li>
<li>The <strong>Operator</strong> opts into the NCN, signifying agreement.</li>
<li>Both entities must mutually opt-in to establish a valid state.</li>
</ul>
<h2 id="3-vault-delegation-to-operators">3. Vault Delegation to Operators</h2>
<div class="mermaid">flowchart LR

    classDef main fill:#AAA,stroke:#333,stroke-width:2px;
    classDef ticket fill:#595,stroke:#333,stroke-width:1px,font-size:10;

    subgraph Vault Program
        Vault[Vault]:::main
        VaultOperatorDelegation[VaultOperatorDelegation]:::ticket
    end

    subgraph Restaking Program
        Operator[Operator]:::main
        OperatorVaultTicket[OperatorVaultTicket]:::ticket
    end

    %% Vault Program Links
    Vault --&gt;|Creates| VaultOperatorDelegation
    VaultOperatorDelegation --&gt;|Delegates stake| Operator

    %% Restaking Program Links
    Operator --&gt;|Creates| OperatorVaultTicket
    OperatorVaultTicket --&gt;|Links| Vault

    %%%% Cross-Program Links
    Vault -.-&gt;|Opts in| Operator
    Vault -.-&gt;|Delegates stake to| Operator
</div>
<h3 id="explanation_2">Explanation</h3>
<ul>
<li>The <strong>Vault Program</strong> creates <code>VaultOperatorDelegation</code> to delegate stake to an operator.</li>
<li>The <strong>Restaking Program</strong> creates <code>OperatorVaultTicket</code> to formalize the connection.</li>
<li>The vault must explicitly opt-in to the operator before delegation occurs.</li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
<script src="../../../assets/mkdocs_pagetree_plugin.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>